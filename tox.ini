[tox]
envlist =
   clean
   lint
   py39
   py310
   py311
   report

[testenv]
description = run tests
package_root =
   ./
   plugins
deps =
   pytest
   pytest-cov
   pytest-randomly
   hypothesis
   ; installes editable, packaged would be better:
   -r requirements.txt
   ; would work if extra would be public:
   ; extras = plugins   
commands =
   pytest -m "not slow" --durations=15 --cov=kimmdy --randomly-seed=1 
   ; pytest --cov=kimmdy --randomly-seed=1
   ; pytest --cov=kimmdy --cov-append --randomly-seed=1
   ; only test discovery:
   ; pytest --cov=kimmdy --randomly-seed=1 --co   

[testenv:lint]
description = run black
skip_install = true
deps =
   black
commands = 
   black src tests

[testenv:clean]
deps = coverage
skip_install = true
commands = coverage erase

[testenv:report]
deps = coverage
skip_install = true
commands =
   coverage report
   coverage html
   

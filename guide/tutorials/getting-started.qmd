---
resources:
  - './getting-started-files/*'
---

# Getting Started

Let's jump right in!

## Installation

### Prerequisites

- `python3.9` or higher
- `gromacs` (tested with version 2021.4, `gmx` should be available in the `PATH`)

Optional:

- `plumed`-patched version of `gromacs` (for the homolysis reaction).

## Installation

Let's first create a directory and a virtual environment for `kimmdy`:

```bash
mkdir kimmdy-tutorial
cd kimmdy-tutorial
python -m venv .venv
source .venv/bin/activate
```

To install KIMMDY, the builtin reaction plugins and the analysis tools use

```bash
pip install kimmdy[reactions,analysis]
```

## Setup the Simulation

Download and unzip the [input files](./getting-started-files/setup.zip) to this directory.

```bash
# TODO: add link to gihtub user content
wget ...
unzip setup.zip
```

The `kimmdy.yml` file should look like this:

```{.yaml filename='kimmdy.yml'}
dryrun: false
max_tasks: 100
name: 'hat_tf_000'
gromacs_alias: 'gmx'
top: 'Ala_out.top'
gro: 'npt.gro'
ndx: 'index.ndx'
mds:
  equilibrium:
    mdp: 'md.mdp'
  relax:
    mdp: 'md_slow.mdp'
changer:
  coordinates:
    md: 'relax'      
reactions:
  hat_reaction:
    frequency_factor: 100000000
    h_cutoff: 3
    polling_rate: 1

sequence:
- equilibrium
- mult: 2
  tasks:
  - equilibrium
  - reactions
```


Our starting structure is a simple ACE/NME-capped Alanine molecule in a box of water.
Note, how it has a missing hydrogen atom on the alpha carbon.
This is a radical.
We will use the builtin `hat_reaction` to simulate hydrogen atom transfer reactions
from nearby hydrogens to the radical position.

{{< mol-snapshot vis-ala.molj >}}

Start the KIMMDY run with the `kimmdy` command:

## Run the Simulation

```bash
kimmdy
```

You can also run kimmdy directly from python with

```python
from kimmdy.cmd import kimmdy_run
kimmdy_run()
```

## Analyse the Simulation

Concatenate the trajectories from the individual steps into one for viewing:

```bash
kimmdy-analysis trjcat alanine_hat_000 --open-vmd
```

Check the energy of the system:

```bash
kimmdy-analysis energy alanine_hat_000 --open-plot --terms Potential Kinetic
```

![Energy plot](./img/getting-started-energy.png)

Visualize where the radicals end up:

```bash
kimmdy-analysis radical_population alanine_hat_000 --open-plot --open-vmd
```

In VMD, color the atoms by beta factor to show the radical occupancy.

![VMD representation settings](./img/getting-started-vmd-radicals.png)

![Radical population plot](./img/getting-started-radicals.png)

Plot the reaction rates:

```bash
kimmdy-analysis rates alanine_hat_000
```

In the `alanine_hat_000/analysis` directory you will then find a plot of rates
for each possible reaction at every step they were queried, e.g.

![Reaction rates plot](./img/getting-started-rates.svg)

Or do all of the above directly from python:

```python
from kimmdy.analysis import concat_trj, plot_energy, radical_population, plot_rates
concat_trj('alanine_hat_000', open_vmd=True)
plot_energy('alanine_hat_000', terms=['Potential', 'Kinetic'], open_plot=True)
radical_population('alanine_hat_000', open_plot=True, open_vmd=True)
plot_rates('alanine_hat_000')
```

Congratulations, you have successfully run your first KIMMDY simulation!

## Next steps

- [Learn more about the KIMMDY input file]()
- [Learn more about the builtin reaction plugins](/docs/reactions)
- [Learn more about the builtin analysis tools](/docs/analysis)



